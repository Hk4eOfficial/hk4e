[
    //3.1 一次性挑战地城因子
    {
      "Default": 
      {
        "$type": "ConfigAbility",
        "abilityName": "ActivityAbility_LevelEntity_Challenge_FallingWindZone",
        "isDynamicAbility": true,
        "abilitySpecials": 
        {
          "LevelEntity_WindZone_CD":8,
        },
        "onAdded": 
        [
          {
              "$type": "AttachModifier",
              "modifierName": "UNIQUE_LevelEntity_Challenge_FallingWindZon_Handler",
              "target": "Self",
          },
          {
            "$type": "SetGlobalValue",
            "key": "LevelEntity_FallingWindZone_CD",
            "target":"Team",
            "value": 0
          }
        ],
        "modifiers": 
        {
          "UNIQUE_LevelEntity_Challenge_FallingWindZon_Handler":
          {
            "isUnique":true,
                      "onAvatarIn":
                      [
                          //开启超级跳
                          {
                              "$type": "EnableRocketJump",
                              "canBeHandledOnRecover": true,
                              "type": "DungeonJump",
                              "enable": true,
                              "extention":
                              {
                                  "xzMultiplier": 2, //xz平面速度乘子
                                  "yMultiplier": 3.0, //y轴跳跃速度乘子
                              }
                          },
                      ],
                      "onAdded":
                      [
                          //开启超级跳
                          {
                              "$type": "EnableRocketJump",
                              "canBeHandledOnRecover": true,
                              "type": "DungeonJump",
                              "enable": true,
                              "extention":
                              {
                                  "xzMultiplier": 2, //xz平面速度乘子
                                  "yMultiplier": 3.0, //y轴跳跃速度乘子
                              }
                          },
                      ],
                      "onRemoved":
                      [
                          //关闭超级跳
                          {
                              "$type": "EnableRocketJump",
                              "type": "DungeonJump",
                              "target": "CurTeamAvatars",
                              "doOffStage": true,
                              "enable": false,
                          },
                      ],
            "onAttackLanded":
            [
              {
                "$type": "Predicated",
                "target": "Other",
                "targetPredicates": 
                [
                    {
                        "$type": "ByTargetGlobalValue",
                        "target": "Team",
                        "key": "LevelEntity_FallingWindZone_CD",
                        "value": 0,
                        "compareType": "NoneOrEqual"
                    },
                    {
                      "$type": "ByEntityTypes",
                      "entityTypes": ["Monster"],
                    },
                    {
                      "$type": "ByAttackTags",
                      "target": "Self",
                      "attackTags": 
                      [
                         "FallingAttack"
                      ],
                  },//下落攻击
                ],
                "successActions": 
                [
                  {
                    "$type": "ApplyModifier",
                    "modifierName": "UNIQUE_LevelEntity_FallingWindZone_WindZoneEffect",
                    "doOffStage": true,
                  }
                ],
              },
            ],        
          },
          "UNIQUE_LevelEntity_FallingWindZone_WindZoneEffect":
          {
            "isUnique":true,
            "stacking":"Unique",
            "duration": 0.2, //表现上做了个延迟
            "onAdded": 
            [           
            ],
            "onRemoved":
            [
              //产生风场
              {
                "$type": "CreateGadget",
                "gadgetID": 44000455,
                "doOffStage": true,
                "campID": 1001,
                "campTargetType": "Enemy",
                "born":
                {
                  "$type": "ConfigBornBySelf",
                  "offset" :
                  {
                    "x": 0.0,
                    "y": 0.5,
                    "z": 0.0,
                  },
                },
              },
              //进CD
              {
                "$type": "ApplyModifier",
                "modifierName": "UNIQUE_LevelEntity_FallingWindZone_WindZone_CD",
                "target": "Team",
                "doOffStage": true,
              }           
            ]
          },
          "UNIQUE_LevelEntity_FallingWindZone_WindZone_CD" :
          {
            "isUnique": true,
            "stacking": "Unique",
            "duration": "%LevelEntity_WindZone_CD",
            "onAdded": 
            [
                {
                    "$type": "SetGlobalValue",
                    "key": "LevelEntity_FallingWindZone_CD",
                    "value": -1
                }
            ],
            "onRemoved": 
            [
                {
                    "$type": "SetGlobalValue",
                    "key": "LevelEntity_FallingWindZone_CD",
                    "value": 0
                }
            ]          
          }, 
        },
      },
    }, 
  //风场gadget
  {
    "Default": 
    {
      "$type": "ConfigAbility",
      "abilityName": "LevelEntity_Challenge_WindZone_Gadget",
      "onAdded":
      [
        {
          "$type": "AttachModifier",
          "modifierName": "Life_Timer",
        },
        {
          "$type": "AttachModifier",
          "modifierName": "RogueV2_WindZone",
        },
      ],
      "modifiers":
      {
        "Life_Timer":
        {
          "duration": "%Duration",
          "onRemoved":
          [
            {
              "$type": "KillSelf",
            },
          ],
        },
        "RogueV2_WindZone": //风场聚怪
        {
          "onAdded":
          [
            {
              "$type": "AttachEffect",
              "effectPattern": "Eff_Activity_Roguelike_Gadget_Wind_Absorbe",
            },
          ],
          "modifierMixins":
          [
            {
              "$type": "WindZoneMixin",
              "shapeName": "CircleR12",
              "innerRadius": 1.0,
              "strength": 5,
              //"attenuation": 2,
              "born":
              {
                "$type": "ConfigBornBySelf",
                "offset":
                {
                  "x": 0.0,
                  "y": 0.5,
                  "z": 0.0,
                },
              },
              "targetType": "All",
              "predicates":
              [
                {
                  "$type": "ByEntityTypes",
                  "entityTypes": ["Avatar"],
                  "reject": true,
                },
              ],
            },
          ],
        },
      },
      "abilitySpecials":
      {
        "Duration": 8,          //风场持续时间
      },
    },
  },
    //草反应相关触发冲击波
    {
      "Default":
      {
          "$type": "ConfigAbility",
          "abilityName": "ActivityAbility_LevelEntity_Challenge_GrassReaction_Impact",
          "isDynamicAbility": true,
          "onAdded": 
          [
              {
                  "$type": "SetSystemValueToOverrideMap",
                  "key": "ImpactDamageSystemValue",
                  "type": "ElementLevelCo"
              },
              {
                "$type": "AttachModifier",
                "modifierName": "UNIQUE_LevelEntity_Challenge_GrassReaction_Impact",
                "target": "Self",
                "doOffStage":true,
              },
          ],
          "modifiers":
          {
              "UNIQUE_LevelEntity_Challenge_GrassReaction_Impact":
              {
                  "isUnique": true,
                  "stacking": "Unique",
                  "modifierMixins": 
                  [
                      {
                          "$type": "DoActionByElementReactionMixin",
                          "range": 20,
                          "doOffStage":true,
                          "entityTypes": 
                          [
                             "Monster"
                          ],
                          "reactionTypes": 
                          [
                              "Burning",
                              "Overdose",
                              "Overgrow",
                              "OverdoseGrass",
                              "OverdoseElectric",
                              "OvergrowMushroomElectric",
                              "OvergrowMushroomFire"
                          ],
                          "actions": 
                          [
                              {
                                  "$type": "Predicated",
                                  "target": "Other",
                                  "doOffStage": true,
                                  "targetPredicates": 
                                  [
                                      {
                                          "$type": "ByTargetGlobalValue",
                                          "key": "ImpactInterval",
                                          "target": "Team",
                                          "value": 0,
                                          "compareType": "NoneOrEqual",
                                      }
                                  ],//通过可以生成冲击波的状态判断cd是否结束
                                  "successActions": 
                                  [
                                      {
                                          "$type": "ApplyModifier",
                                          "target": "Other",
                                          "modifierName": "Activity_LevelEntity_Challenge_GrassReaction_Handler_Delay",
                                          "doOffStage":true,
                                      },
                                      {
                                          "$type": "ApplyModifier",
                                          "doOffStage": true,
                                          "target": "Team",
                                          "modifierName": "UNIQUE_LevelEntity_Challenge_GrassReaction_Impact_CD"
                                      },
                                  ]
                              }
                          ],
                      }
                  ]
              },

              "Activity_LevelEntity_Challenge_GrassReaction_Handler_Delay":
              {
                  "duration": 0.1,
                  "onAdded": 
                  [
                      {
                          "$type": "FireEffect",
                          "doOffStage":true,
                          "effectPattern": "Eff_Stages_GainWave_01",
                      },
                      {
                          "$type": "TriggerAttackEvent",
                          "targetType": "Enemy",
                          "target": "Applier",
                          "doOffStage":true,
                          "attackEvent": 
                          {
                              "attackPattern":
                              {
                                  "$type": "ConfigAttackSphere",
                                  "triggerType": "TriggerNoRepeat",
                                  "radius": 5,
                                  "born":
                                  {
                                      "$type": "ConfigBornBySelf",
                                  }
                              },
                              "attackInfo": 
                              {
                                  "canBeModifiedBy": "OriginOwner",
                                  "attackProperty": 
                                  {
                                      "damageExtra": "%ImpactDamage*%ImpactDamageSystemValue",
                                      "ignoreAttackerProperty": true,//忽略角色属性加成
                                      "ignoreModifyDamage": true,
                                      "trueDamage": true,
                                      "attackType": "Melee",
                                      "elementType": "None",//元素类型为无
                                      "elementDurability": 0,//元素含量为0
                                      "enBreak": 0
                                  },
                                  "hitPattern": 
                                  {
                                      "onHitEffectName": "default",//击中特效名称，
                                      "hitImpulseType": "LV2",//击退？
                                      "reboundRatio": 0,//需要解释
                                      "canBeDefenceHalt": false,//持盾防御者无法产生额外卡肉
                                      "hitHaltTime": 0,
                                      "hitHaltTimeScale": 0.02,
                                      "muteHitText": false,//不跳字
                                  },//打击效果
                              }
                          }
                      },//生成圆形攻击盒
                  ],
              },
              "UNIQUE_LevelEntity_Challenge_GrassReaction_Impact_CD":
              {
                  "isUnique": true,
                  "stacking": "Unique",
                  "duration": "%ImpactInterval",
                  "onAdded": 
                  [
                      {
                          "$type": "SetGlobalValue",
                          "doOffStage": true,
                          "target": "Team",
                          "key": "ImpactInterval",
                          "value": -1
                      }
                  ],
                  "onRemoved": 
                  [
                      {
                          "$type": "SetGlobalValue",
                          "doOffStage": true,
                          "target": "Team",
                          "key": "ImpactInterval",
                          "value": 0
                      }
                  ]    
              },
             
          },
          "abilitySpecials": 
          {
              "ImpactDamageSystemValue": 0,
              "ImpactDamage": 13,
              "ImpactInterval": 3,
          }    
      }
  },
//////////////////////////////////////////////////////////
//
//     爬塔删下层清理残留gadget
//
//////////////////////////////////////////////////////////
{
  "Default":
  {
    "$type": "ConfigAbility",
    "abilityName": "LevelEntity_ClearLocalGadgets",
    "isDynamicAbility": true,
    "onAbilityStart": 
    [
      {
        "$type": "ClearLocalGadgets",
        "whiteList": [70900344, 70900345, 70900346, 70900347],
      },
    ],
  },
},
//////////////////////////////////////////////////////////
//
//     3.1 深境螺旋因子
//
//////////////////////////////////////////////////////////

//角色每次触发绽放反应时（包括超绽放、烈绽放），全队元素精通提升40，每层持续10秒（独立计时），最多叠5层，叠层cd 0.1秒。
{
  "Default": 
  {
    "$type": "ConfigAbility",
    "abilityName": "LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta",
    "isDynamicAbility": true,
    "abilitySpecials": 
    {
        "BuffTime": 10,
        "ElemMasteryDelta":40,
    },
    "onAdded": 
    [
      {
        "$type": "AttachModifier",
        "doOffStage": true,
        "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta"
      },
    ],
    "modifiers": 
    {
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta": 
      {
        "stacking": "Unique",
        "isUnique": true,
        "modifierMixins":
        [
            {
                "$type": "DoActionByElementReactionMixin",
                "doOffStage": true, 
                "type": "Both",
                "range": 20, 
                "entityTypes":
                [
                    "Monster"
                ],
                "reactionTypes":
                [
                    "Overgrow",
                    "OvergrowMushroomFire",
                    "OvergrowMushroomElectric",
                ],
                "actions":
                [
                  {
                    "$type": "Predicated",
                    "doOffStage": true,
                    "target": "Team",
                    "targetPredicates":
                    [
                      {
                        "$type": "ByTargetGlobalValue",
                        "key": "_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_CD",
                        "target": "Team",
                        "value": 0,
                        "compareType": "NoneOrEqual",
                      },
                    ],
                    "successActions":
                    [
                      {
                        "$type": "ApplyModifier",
                        "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_BuffEffect",
                        "target": "CurTeamAvatars",
                        "doOffStage": true,                               
                      },
                      {
                        "$type": "ApplyModifier",
                        "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_CD",
                        "target": "Team",
                        "doOffStage": true,                               
                      },
                    ],
                  }
                ],
            },
        ],
      },
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_BuffEffect": 
      {
        "isUnique": true,
        "duration": "%BuffTime",
        "state": "AttackUp",
        "stacking":"MultipleRefreshNoRemove",
        "properties": 
        {
          "Actor_ElemMasteryDelta": "%ElemMasteryDelta",
        },
        "stackingOption":
        {
            "maxModifierNumForMultipleType": 5,
            "enableMixedUnique":true,
        },
      },
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_CD": 
      {
        "stacking": "Unique",
        "isUnique": true,
        "duration": 0.1,
        "onAdded": 
        [
          {
            "$type": "SetGlobalValue",
            "target": "Team",
            "key": "_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_CD",
            "value": -1,
            "doOffStage": true,
          },
        ],
        "onRemoved": 
        [
          {
            "$type": "SetGlobalValue",
            "target": "Team",
            "key": "_LevelEntity_TowerBuff_OverGrowTriggerElemMasteryDelta_CD",
            "value": 0,
            "doOffStage": true,
          },
        ],
      },
    },
  },
},
//受到草原核（包含超绽放、烈绽放、异化草原核）爆炸伤害的怪物全抗降低8%，持续6秒（刷新cd），最多叠4层。
{
  "Default": 
  {
    "$type": "ConfigAbility",
    "abilityName": "LevelEntity_TowerBuff_OverGrowTriggerMonsterSubHurtDown",
    "isDynamicAbility": true,
    "abilitySpecials": 
    {
        "BuffTime": 6,
        "SubHurtDownRate":0.08,
    },
    "onAdded": 
    [
      {
        "$type": "AttachModifier",
        "doOffStage": true,
        "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerMonsterSubHurtDown"
      },
    ],
    "modifiers": 
    {
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerMonsterSubHurtDown": 
      {
        "stacking": "Unique",
        "isUnique": true,
        "onAttackLanded": 
        [
          {
            "$type": "Predicated",
            "doOffStage": true,
            "target": "Other",
            "targetPredicates": 
            [
              {
                "$type": "ByEntityTypes",
                "entityTypes": 
                [
                  "Monster"
                ],
              },
              {
                  "$type":"ByHitDamage",
                  "damage": 0,
                  "logic": "Greater",
              },
              {
                "$type": "ByAttackTags",
                "attackTags": ["OverGrowDamage","OverGrow_Fire_Damage","OverGrow_Electric_Damage","OverGrow_Alter_Damage"],
              },
            ],
            "successActions": 
            [
              {
                "$type": "ApplyModifier",
                "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerMonsterSubHurtDown_BuffEffect",
                "target": "Other",
                "doOffStage": true,                  
              },
            ],
          }
        ]
      },
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerMonsterSubHurtDown_BuffEffect": 
      {
        "isUnique": true,
        "duration": "%BuffTime",
        "state": "DefenseDown",
        "stacking":"MultipleAllRefresh",
        "properties": 
        {
              "Actor_FireSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_ElecSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_WaterSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_GrassSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_WindSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_IceSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_RockSubHurtDelta": "-1*%SubHurtDownRate",
              "Actor_PhysicalSubHurtDelta": "-1*%SubHurtDownRate",
        },
        "stackingOption":
        {
            "maxModifierNumForMultipleType": 4,
            "enableMixedUnique":true,
        },  
      },
    },
  },
},

//当草原核（包含超绽放、烈绽放和异化草原核）爆炸击中敌人时，以被击中敌人为中心点额外触发一次冲击波，造成真实伤害，半径5米，伤害系数为6，每2秒触发一次。
{
  "Default": 
  {
    "$type": "ConfigAbility",
    "abilityName": "LevelEntity_TowerBuff_OverGrowTriggerCJB_V3.1",
    "isDynamicAbility": true,
    "abilitySpecials": 
    {
      "CdTime": 2,
      "Wave_Damage": 6,
      "DamageSystemValue": 0,
    },
    "onAdded": 
    [
      {
        "$type": "SetSystemValueToOverrideMap",
        "key": "DamageSystemValue",
        "type": "ElementLevelCo",
      },
      {
        "$type": "AttachModifier",
        "doOffStage": true,
        "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerCJB_V3.1"
      },
    ],
    "modifiers": 
    {
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerCJB_V3.1": 
      {
        "stacking": "Unique",
        "isUnique": true,
        "onAttackLanded": 
        [
          {
            "$type": "Predicated",
            "doOffStage": true,
            "target": "Other",
            "targetPredicates": 
            [
              {
                "$type": "ByEntityTypes",
                "entityTypes": 
                [
                  "Monster"
                ],
              },
              {
                "$type": "ByAttackTags",
                "attackTags": ["OverGrowDamage","OverGrow_Fire_Damage","OverGrow_Electric_Damage","OverGrow_Alter_Damage"],
              },
              {
                "$type": "ByTargetGlobalValue",
                "key": "_LevelEntity_TowerBuff_OverGrowTriggerCJB_CD",
                "target": "Team",
                "value": 0,
                "compareType": "NoneOrEqual",
              },
            ],
            "successActions": 
            [
                //给目标上冲击波
                {
                  "$type": "ApplyModifier",
                  "modifierName": "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerCJB_AoeEffect",
                  "target": "Other",
                  "doOffStage": true,
                },
                //跑CD
                {
                  "$type" : "ApplyModifier",
                  "modifierName" : "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerCJB_AoeCD",
                  "target":"Team",
                  "doOffStage": true,
                }
            ],
          }
        ]
      },
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerCJB_AoeEffect":
      {
        "isUnique":true,
        "duration":0.1,
        "onAdded":
        [
          {
            "$type": "FireEffect",
            "effectPattern": "Eff_Stages_GainWave_01",
            "target": "Self",
            "doOffStage": true,
          },
          {
            "$type": "TriggerAttackEvent",
            "doOffStage": true,
            "targetType": "SelfCamp",
            "attackEvent": 
            {
              "attackPattern": 
              {
                "$type": "ConfigAttackSphere", //攻击球
                "triggerType": "TriggerNoRepeat",
                "radius": 5.0, //半径
                "born": 
                {
                  "$type": "ConfigBornBySelf",
                }
              },
              "attackInfo": 
              {
                "attackProperty": //攻击伤害
                {
                  "damageExtra": "%Wave_Damage*%DamageSystemValue", //伤害百分比
                  "trueDamage":true,
                  "ignoreAttackerProperty": true, 
                  "ignoreModifyDamage":true,
                  "elementType": "None",
                  "elementDurability": 0,
                  "enBreak": 0, //破霸体值
                },
                "hitPattern": //击中效果
                {
                  "onHitEffectName": "default",
                  "hitImpulseType": "LV2",
                  "reboundRatio": 0,
                  "canBeDefenceHalt": false,
                  "hitHaltTime": 0,
                  "hitHaltTimeScale": 0.02,
                  "muteHitText": false,
                },
              },
            },
          },
        ]
      },
      "UNIQUE_LevelEntity_TowerBuff_OverGrowTriggerCJB_AoeCD":
      {
        "isUnique":true,
        "duration":"%CdTime",
        "onAdded":
        [
          {
            "$type": "SetGlobalValue",
            "key": "_LevelEntity_TowerBuff_OverGrowTriggerCJB_CD",
            "value": -1,
            "doOffStage": true,
          },
        ],
        "onRemoved":
        [
          {
            "$type": "SetGlobalValue",
            "key": "_LevelEntity_TowerBuff_OverGrowTriggerCJB_CD",
            "value": 0,
            "doOffStage": true,
          },
        ]
      },
    },
  },
},

//////////////////////////////////////////////////////////
//
//     3.2 深境螺旋
//
//////////////////////////////////////////////////////////

//元素精通提升
{
  "Default": 
  {
    "$type": "ConfigAbility",
    "abilityName": "LevelEntity_TowerBuff_ElemMasteryDelta",
    "isDynamicAbility":true,
    "abilitySpecials": 
    {
      "TowerBuff_ElemMasteryDelta": 0,
    },
    "onAdded": 
    [
      {
        "$type": "AttachModifier",
        "modifierName": "UNIQUE_LevelEntity_TowerBuff_ElemMasteryDelta",
        "doOffStage": true,
      }
    ],
    "modifiers":
    {
      "UNIQUE_LevelEntity_TowerBuff_ElemMasteryDelta":
      {
          "isUnique": true,
          "properties": 
          {
            "Actor_ElemMasteryDelta": "%TowerBuff_ElemMasteryDelta",
          },
      }
    },
  },
},

//角色每次对怪物造成伤害后，以怪物为中心触发一次冲击波，半径5米，伤害系数6，cd8秒，每一种元素伤害类型（包含物理）触发冲击波的CD各自独立计算。
{
  "Default":
  {
      "$type": "ConfigAbility",
      "abilityName": "LevelBuff_TowerBuff_ElemDamage_Impact",
      "isDynamicAbility": true,
      "abilitySpecials": 
      {
          "Dot_Damage": 0,
          "DamageSystemValue":0,
          "ImpactInterval": 0,
      },
      "onAdded": 
      [
        {
          "$type": "AttachModifier",
          "doOffStage": true,
          "modifierName": "UNIQUE_TowerBuff_ElemDamage_Impact_Handler"
        },
        {
          "$type": "SetSystemValueToOverrideMap",
          "key": "DamageSystemValue",
          "type": "ElementLevelCo",
        },
      ],
      "modifiers": 
      {
          "UNIQUE_TowerBuff_ElemDamage_Impact_Handler":
          {
              "isUnique": true,
              "onAttackLanded": 
              [
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "damage": 0,
                              "logic":"Greater",
                          },
                          {
                              "$type": "ByHitElement",
                              "element": "Fire",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_FireCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Fire_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "damage": 0,
                              "logic":"Greater",
                          },//判断伤害
                          {
                              "$type": "ByHitElement",
                              "element": "Water",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_WaterCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Water_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "damage": 0,
                              "logic":"Greater",
                          },//判断伤害
                          {
                              "$type": "ByHitElement",
                              "element": "Ice",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_IceCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }           
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Ice_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "target": "Target",
                              "damage": 0,
                              "logic":"Greater",
                          },//判断伤害
                          {
                              "$type": "ByHitElement",
                              "element": "Electric",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_ElectricCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }                          
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Electric_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "target": "Target",
                              "damage": 0,
                              "logic":"Greater",
                          },//判断伤害
                          {
                              "$type": "ByHitElement",
                              "element": "Rock",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_RockCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }                         
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Rock_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "target": "Target",
                              "damage": 0,
                              "logic":"Greater",
                          },//判断伤害
                          {
                              "$type": "ByHitElement",
                              "element": "Wind",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_WindCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }                         
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Wind_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                      "$type": "Predicated",
                      "target": "Other",
                      "doOffStage": true,
                      "targetPredicates": 
                      [
                          {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                          },
                          {
                              "$type": "ByHitDamage",
                              "target": "Target",
                              "damage": 0,
                              "logic":"Greater",
                          },//判断伤害
                          {
                              "$type": "ByHitElement",
                              "element": "Grass",
                          },
                          {
                            "$type": "ByTargetGlobalValue",
                            "target":"Team",
                            "key": "_TowerBuff_ElemDamage_Impact_GrassCD",
                            "value": 0,
                            "compareType": "NoneOrEqual"
                          }                         
                      ],
                      "successActions": 
                      [
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                          "target": "Other",
                          "doOffStage":true,
                        },
                        {
                          "$type": "ApplyModifier",
                          "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_Grass_CD",
                          "target": "Team",
                          "doOffStage":true,
                        },
                      ]
                  },
                  {
                    "$type": "Predicated",
                    "target": "Other",
                    "doOffStage": true,
                    "targetPredicates": 
                    [
                        {
                            "$type": "ByEntityTypes",
                            "entityTypes": 
                            [
                              "Monster"
                            ],
                        },
                        {
                            "$type": "ByHitDamage",
                            "damage": 0,
                            "logic":"Greater",
                        },//判断伤害
                        {
                            "$type": "ByHitElement",
                            "element": "None",
                        },
                        {
                          "$type": "ByTargetGlobalValue",
                          "target":"Team",
                          "key": "_TowerBuff_ElemDamage_Impact_NoneCD",
                          "value": 0,
                          "compareType": "NoneOrEqual"
                        }                        
                    ],
                    "successActions": 
                    [
                      {
                        "$type": "ApplyModifier",
                        "modifierName": "TowerBuff_ElemDamage_Impact_CJBEffect",
                        "target": "Other",
                        "doOffStage":true,
                      },
                      {
                        "$type": "ApplyModifier",
                        "modifierName": "UNIQUE_TowerBuff_DamageUp_ElemDamage_None_CD",
                        "target": "Team",
                        "doOffStage":true,
                      },
                    ]
                },

              ],
          },
          "TowerBuff_ElemDamage_Impact_CJBEffect":
          {
            "duration":0.1,
            "stacking":"Multiple",
            "onAdded":
            [
              //以目标为中心触发冲击波
              {
                "$type": "FireEffect",
                "effectPattern": "Eff_Stages_GainWave_01",
                "target": "Self",
                "doOffStage": true,
              },
              {
                "$type": "TriggerAttackEvent",
                "targetType": "SelfCamp",
                "doOffStage": true,
                "attackEvent": 
                {
                  "attackPattern": 
                  {
                    "$type": "ConfigAttackSphere", //攻击球
                    "triggerType": "TriggerNoRepeat",
                    "radius": 5.0, //半径
                    "born": 
                    {
                      "$type": "ConfigBornBySelf",
                    }
                  },
                  "attackInfo":
                  {
                    "attackProperty": //攻击伤害
                    {
                      "damageExtra": "%Dot_Damage*%DamageSystemValue", //伤害百分比
                      "ignoreAttackerProperty": true,
                      "ignoreModifyDamage":true,
                      "trueDamage":true,
                      "attackType": "Melee", //攻击类型
                      "elementType": "None", //元素类型
                      "elementDurability": 0,
                      "enBreak": 25, //破霸体值
                    },
                    "hitPattern": //击中效果
                    {
                      "onHitEffectName": "default",
                      "hitImpulseType": "LV2",
                      "reboundRatio": 0,
                      "canBeDefenceHalt": false,
                      "hitHaltTime": 0,
                      "hitHaltTimeScale": 0.02,
                      "muteHitText": false,
                    },
                  },
                },
              },
            ]
  
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Fire_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_FireCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_FireCD",
                      "value": 0
                  }
              ]    
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Water_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_WaterCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_WaterCD",
                      "value": 0
                  }
              ]    
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Ice_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_IceCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_IceCD",
                      "value": 0
                  }
              ]    
          },     
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Electric_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_ElectricCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_ElectricCD",
                      "value": 0
                  }
              ]    
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Rock_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_RockCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_RockCD",
                      "value": 0
                  }
              ]    
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Wind_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_WindCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_WindCD",
                      "value": 0
                  }
              ]    
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_Grass_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_GrassCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_GrassCD",
                      "value": 0
                  }
              ]    
          },
          "UNIQUE_TowerBuff_DamageUp_ElemDamage_None_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_NoneCD",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "_TowerBuff_ElemDamage_Impact_NoneCD",
                      "value": 0
                  }
              ]    
          },         
      },
  }
},

//角色每次对怪物触发草元素相关的元素反应后，全队的草元素伤害提升10%，持续时间10秒，最多叠4层（刷新持续时间），叠层保护cd 5秒，
//叠到满层后角色每次对怪物造成草元素伤害时都会以怪物为中心触发一次半径10米的冲击波，伤害系数7.49，cd 5秒。
{
  "Default":
  {
      "$type": "ConfigAbility",
      "abilityName": "LevelBuff_TowerBuff_GrassReaction_Impact",
      "isDynamicAbility": true,
      "abilitySpecials": 
      {
          "GrassAddHurt": 0,
          "BuffTime": 0,
          "BuffMaxLevel": 0,
          "Multiple_CdTime": 0,
          "Dot_Damage": 0, //冲击波伤害系数
          "DamageSystemValue": 0,
          "ImpactInterval": 0,
      },
      "onAdded": 
      [
        {
          "$type": "SetSystemValueToOverrideMap",
          "key": "DamageSystemValue",
          "type": "ElementLevelCo",
        },
        {
          "$type": "AttachModifier",
          "modifierName": "UNIQUE_LevelEntity_TowerBuff_GrassReaction_Impact_Handler",
          "doOffStage":true,
        },
        //造成草伤打cjb处理器
        {
          "$type": "AttachModifier",
          "modifierName": "UNIQUE_LevelEntity_TowerBuff_GrassDamage_Impact_Handler",
          "doOffStage":true,
        },
      ],
      "modifiers":
      {
          "UNIQUE_LevelEntity_TowerBuff_GrassReaction_Impact_Handler":
          {
              "isUnique": true,
              "modifierMixins": 
              [
                  {
                      "$type": "DoActionByElementReactionMixin",
                      "range": 20,
                      "doOffStage":true,
                      "entityTypes": 
                      [
                         "Monster"
                      ],
                      "reactionTypes": 
                      [
                          "Burning",
                          "Overdose",
                          "Overgrow",
                          "OverdoseGrass", //蔓激化
                          "OverdoseElectric", //雷激化
                          "OvergrowMushroomElectric",//雷蔓生
                          "OvergrowMushroomFire"
                      ],
                      "actions": 
                      [
                          {
                            "$type": "ApplyModifier",
                            "modifierName": "UNIQUE_LevelEntity_TowerBuff_GrassAddHurt_Multiple_Handler",
                            "target":"Team", //叠层不能叠太快，有cd
                            "doOffStage":true,
                          },
                      ],
                  }
              ]
          },
          "UNIQUE_LevelEntity_TowerBuff_GrassAddHurt_Multiple_Handler":
          {
            "isUnique":true,
            "stacking":"Unique",
            "duration":"%Multiple_CdTime",
            "onAdded":
            [
              {
                "$type": "ApplyModifier",
                "modifierName": "UNIQUE_LevelEntity_TowerBuff_GrassAddHurt_MultipleEffect",
                "target": "CurTeamAvatars",
                "doOffStage":true,
              },
              {
                "$type": "ApplyModifier",
                "modifierName": "UNIQUE_LevelEntity_TowerBuff_GrassAddHurt_CountLayer",
                "target": "Team",
                "doOffStage":true,
              },
            ]
          },
          "UNIQUE_LevelEntity_TowerBuff_GrassAddHurt_CountLayer":
          {
            "isUnique":true,
            "duration":1,
            "onAdded":
            [
              {
                "$type": "AddGlobalValue",
                "key": "_LevelEntity_TowerBuff_MultipleCount",
                "target":"Team",
                "useLimitRange": true,
                "minValue": 0,
                "maxValue": 4,              
                "value": 1, 
                "doOffStage": true,             
              }
            ], 
          },
          "UNIQUE_LevelEntity_TowerBuff_GrassAddHurt_MultipleEffect":
          {
            "isUnique": true,
            "duration": "%BuffTime",
            "state": "AttackUp",
            "stacking":"MultipleAllRefresh",
            "properties": 
            {
                "Actor_GrassAddHurtDelta":"%GrassAddHurt",
            },
            "stackingOption":
            {
                "maxModifierNumForMultipleType": "%BuffMaxLevel",
                "enableMixedUnique":true,
            }, 
            "onRemoved":
            [
              {
                "$type": "SetGlobalValue",
                "key": "_LevelEntity_TowerBuff_MultipleCount",
                "target":"Team",
                "doOffStage": true,
                "value": 0,              
              }
            ]        
          },
          "UNIQUE_LevelEntity_TowerBuff_GrassDamage_Impact_Handler":
          {
            "isUnique": true,
            "onAttackLanded": 
            [
              {
                "$type": "Predicated",
                "doOffStage":true,
                "target": "Other",
                "targetPredicates": 
                [
                  {
                    "$type": "ByEntityTypes",
                    "entityTypes": 
                    [
                      "Monster"
                    ],
                  },
                  {
                    "$type": "ByHitDamage",
                    "damage": 0,
                    "logic":"Greater",
                  },
                  {
                      "$type": "ByHitElement",
                      "element": "Grass",
                  },
                  {
                    "$type": "ByTargetGlobalValue",
                    "key": "ImpactInterval",
                    "target": "Team",
                    "value": 0,
                    "compareType": "NoneOrEqual",
                  },
                  {
                    "$type": "ByTargetGlobalValue",
                    "key": "_LevelEntity_TowerBuff_MultipleCount",
                    "target": "Team",
                    "value": 4,
                    "compareType": "Equal",
                  },
                ],
                "successActions": 
                [
                  {
                    "$type": "ApplyModifier",
                    "modifierName": "UNIQUE_TowerBuff_Impact_MaxLayerEffect_Monster",
                    "target": "Other",
                    "doOffStage":true,                  
                  },
                  //计算CD
                  {
                    "$type": "ApplyModifier",
                    "modifierName": "UNIQUE_LevelEntity_TowerBuff_GrassReaction_Impact_CD",
                    "target": "Team",
                    "doOffStage":true,
                  },
                ],
              }
            ]
          },
          "UNIQUE_TowerBuff_Impact_MaxLayerEffect_Monster":
          {
            "isUnique":true,
            "duration":0.1,
            "onAdded":
            [
              //以目标为中心触发冲击波
              {
                "$type": "FireEffect",
                "effectPattern": "Eff_Stages_SwirlDoField_DoAttack_02",
                "doOffStage":true,
                "born": 
                {
                  "$type": "ConfigBornByTarget",
                  "target": "Self",
                },
              },
              {
                "$type": "TriggerAttackEvent",
                "targetType": "SelfCamp",
                "doOffStage":true,
                "attackEvent": 
                {
                  "attackPattern": 
                  {
                    "$type": "ConfigAttackSphere", //攻击球
                    "triggerType": "TriggerNoRepeat",
                    "radius": 10.0, //半径
                    "born": 
                    {
                      "$type": "ConfigBornBySelf",
                    }
                  },
                  "attackInfo":
                  {
                    "attackProperty": //攻击伤害
                    {
                      "damageExtra": "%Dot_Damage*%DamageSystemValue", //伤害百分比
                      "ignoreAttackerProperty": true,
                      "ignoreModifyDamage":true,
                      "trueDamage":true,
                      "attackType": "Melee", //攻击类型
                      "elementType": "None", //元素类型
                      "elementDurability": 0,
                      "enBreak": 25, //破霸体值
                    },
                    "hitPattern": //击中效果
                    {
                      "onHitEffectName": "default",
                      "hitImpulseType": "LV2",
                      "reboundRatio": 0,
                      "canBeDefenceHalt": false,
                      "hitHaltTime": 0,
                      "hitHaltTimeScale": 0.02,
                      "muteHitText": false,
                    },
                  },
                },
              },
            ]
  
          },
          "UNIQUE_LevelEntity_TowerBuff_GrassReaction_Impact_CD":
          {
              "isUnique": true,
              "stacking": "Unique",
              "duration": "%ImpactInterval",
              "onAdded": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "ImpactInterval",
                      "value": -1
                  }
              ],
              "onRemoved": 
              [
                  {
                      "$type": "SetGlobalValue",
                      "doOffStage": true,
                      "target": "Team",
                      "key": "ImpactInterval",
                      "value": 0
                  }
              ]    
          },
         
      },   
  }
},
]